var Calendar=function(){return{init:function(){App.addResponsiveHandler(function(){Calendar.initCalendar()});$(".page-sidebar .sidebar-toggler").click(function(){Calendar.initCalendar()});Calendar.initCalendar()},initCalendar:function(){if(!jQuery().fullCalendar){return}var b=new Date();var g=b.getDate();var a=b.getMonth();var i=b.getFullYear();var c={};if(App.isRTL()){if($("#calendar").parents(".portlet").width()<=720){$("#calendar").addClass("mobile");c={right:"title, prev, next",center:"",right:"agendaDay, agendaWeek, month, today"}}else{$("#calendar").removeClass("mobile");c={right:"title",center:"",left:"agendaDay, agendaWeek, month, today, prev,next"}}}else{if($("#calendar").parents(".portlet").width()<=720){$("#calendar").addClass("mobile");c={left:"title, prev, next",center:"",right:"today,month,agendaWeek,agendaDay"}}else{$("#calendar").removeClass("mobile");c={left:"title",center:"",right:"prev,next,today,month,agendaWeek,agendaDay"}}}var f=function(h){var d={title:$.trim(h.text())};h.data("eventObject",d);h.draggable({zIndex:999,revert:true,revertDuration:0})};var e=function(h){h=h.length==0?"Untitled Event":h;var d=$('<div class="external-event label">'+h+"</div>");jQuery("#event_box").append(d);f(d)};$("#external-events div.external-event").each(function(){f($(this))});$("#event_add").unbind("click").click(function(){var d=$("#event_title").val();e(d)});$("#event_box").html("");e("My Event 1");e("My Event 2");e("My Event 3");e("My Event 4");e("My Event 5");e("My Event 6");$("#calendar").fullCalendar("destroy");$("#calendar").fullCalendar({header:c,slotMinutes:15,editable:true,droppable:true,drop:function(j,k){var h=$(this).data("eventObject");var d=$.extend({},h);d.start=j;d.allDay=k;d.className=$(this).attr("data-class");$("#calendar").fullCalendar("renderEvent",d,true);if($("#drop-remove").is(":checked")){$(this).remove()}},events:[{title:"All Day Event",start:new Date(i,a,1),backgroundColor:App.getLayoutColorCode("yellow")},{title:"Long Event",start:new Date(i,a,g-5),end:new Date(i,a,g-2),backgroundColor:App.getLayoutColorCode("green")},{title:"Repeating Event",start:new Date(i,a,g-3,16,0),allDay:false,backgroundColor:App.getLayoutColorCode("red")},{title:"Repeating Event",start:new Date(i,a,g+4,16,0),allDay:false,backgroundColor:App.getLayoutColorCode("green")},{title:"Meeting",start:new Date(i,a,g,10,30),allDay:false},{title:"Lunch",start:new Date(i,a,g,12,0),end:new Date(i,a,g,14,0),backgroundColor:App.getLayoutColorCode("grey"),allDay:false},{title:"Birthday Party",start:new Date(i,a,g+1,19,0),end:new Date(i,a,g+1,22,30),backgroundColor:App.getLayoutColorCode("purple"),allDay:false},{title:"Click for Google",start:new Date(i,a,28),end:new Date(i,a,29),backgroundColor:App.getLayoutColorCode("yellow"),url:"http://google.com/"}]})}}}();!function(c){var b=function(e,d){this.element=c(e);this.options=c.extend(true,{},c.fn.tag.defaults,d);this.values=c.grep(c.map(this.element.val().split(","),c.trim),function(f){return f.length>0});this.show()};b.prototype={constructor:b,show:function(){var j=this;j.element.parent().prepend(j.element.detach().attr("type","hidden"));j.element.wrap(c('<div class="tags '+(j.options.containerClasses?j.options.containerClasses:"")+'">')).parent().on("click",function(){j.input.focus()});if(j.values.length){c.each(j.values,function(){j.createBadge(this)})}j.input=c('<input type="text" class="'+(j.options.inputClasses?j.options.inputClasses:"")+'">').attr("placeholder",j.options.placeholder).insertAfter(j.element).on("focus",function(){j.element.parent().addClass("tags-hover")}).on("blur",function(){j.process();j.element.parent().removeClass("tags-hover");j.element.siblings(".tag").removeClass("tag-important")}).on("keydown",function(n){if(n.keyCode==188||n.keyCode==13||n.keyCode==9){if(c.trim(c(this).val())&&(!j.element.siblings(".typeahead").length||j.element.siblings(".typeahead").is(":hidden"))){if(n.keyCode!=9){n.preventDefault()}j.process()}else{if(n.keyCode==188){if(!j.element.siblings(".typeahead").length||j.element.siblings(".typeahead").is(":hidden")){n.preventDefault()}else{j.input.data("typeahead").select();n.stopPropagation();n.preventDefault()}}}}else{if(!c.trim(c(this).val())&&n.keyCode==8){var m=j.element.siblings(".tag").length;if(m){var l=j.element.siblings(".tag:eq("+(m-1)+")");if(l.hasClass("tag-important")){j.remove(m-1)}else{l.addClass("tag-important")}}}else{j.element.siblings(".tag").removeClass("tag-important")}}}).typeahead({source:j.options.source,matcher:function(l){return ~l.toLowerCase().indexOf(this.query.toLowerCase())&&(j.inValues(l)==-1||j.options.allowDuplicates)},updater:c.proxy(j.add,j)});if(j.options.autosizedInput){var e=j.input,h=j.options.minWidth||e.width(),i=j.options.maxWidth||e.closest(".tags").width(),f=10,k="",g=c("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),d=function(){if(k===(k=e.val())){return}var p=k.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");g.html(p);var n=g.width(),o=(n+f)>=h?n+f:h,m=e.width(),l=(o<m&&o>=h)||(o>h&&o<i);if(l){e.width(o)}};g.insertAfter(e);e.bind("keydown keyup blur update",d)}},inValues:function(e){if(this.options.caseInsensitive){var d=-1;c.each(this.values,function(f,g){if(g.toLowerCase()==e.toLowerCase()){d=f;return false}});return d}else{return c.inArray(e,this.values)}},createBadge:function(e){var d=this;c('<span class="tag">').text(e).append(c('<button type="button" class="close"></button>').on("click",function(){d.remove(d.element.siblings(".tag").index(c(this).closest(".tag")))})).insertBefore(d.element)},add:function(g){var f=this;if(!f.options.allowDuplicates){var e=f.inValues(g);if(e!=-1){var d=f.element.siblings(".tag:eq("+e+")");d.addClass("tag-warning");setTimeout(function(){c(d).removeClass("tag-warning")},500);return}}this.values.push(g);this.createBadge(g);this.element.val(this.values.join(", "))},remove:function(d){if(d>=0){this.values.splice(d,1);this.element.siblings(".tag:eq("+d+")").remove();this.element.val(this.values.join(", "))}},process:function(){var d=c.grep(c.map(this.input.val().split(","),c.trim),function(f){return f.length>0}),e=this;c.each(d,function(){e.add(this)});this.input.val("")}};var a=c.fn.tag;c.fn.tag=function(d){return this.each(function(){var f=c(this),g=f.data("tag"),e=typeof d=="object"&&d;if(!g){f.data("tag",(g=new b(this,e)))}if(typeof d=="string"){g[d]()}})};c.fn.tag.defaults={allowDuplicates:false,caseInsensitive:true,placeholder:"",source:[]};c.fn.tag.Constructor=b;c.fn.tag.noConflict=function(){c.fn.tag=a;return this};c(window).on("load",function(){c('[data-provide="tag"]').each(function(){var d=c(this);if(d.data("tag")){return}d.tag(d.data())})})}(window.jQuery);